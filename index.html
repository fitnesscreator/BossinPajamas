<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Boss in Pajamas</title>
  <!-- Stylesheets -->
  <style>
    /* Import Lobster Font */
    @import url('https://fonts.googleapis.com/css2?family=Lobster&display=swap');

    /* General Styles */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      overflow: hidden; /* Prevent double scrollbars */
    }
    .header {
      position: fixed;
      top: 0;
      width: calc(100% - 17px); /* Account for scrollbar width */
  right: 0; /* Align to viewport edge */
  left: auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(to bottom, #e24157, #de1834);
      color: white;
      padding: 10px;
      font-size: 18px;
      z-index: 1000;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }
    .header .time {
      font-size: 14px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6);
    }
    .header .title {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'Lobster', cursive;
      font-size: 27px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6);
    }
    .header .contact-button {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 15px;
  font-size: 15px;
  color: #fff !important;
  text-decoration: none;
  border-radius: 4px;
  background: linear-gradient(to bottom, #bd6670, #a40913);
  border: 1px solid #8a0710;
  box-shadow: 
    0 2px 3px rgba(0,0,0,0.2),
    inset 0 1px 0 rgba(255,255,255,0.3);
  text-shadow: 0 1px 1px rgba(0,0,0,0.3);
  transition: all 0.2s ease;
}

.header .contact-button:hover {
  background: linear-gradient(to bottom, #c86f79, #ad0a15);
  box-shadow: 
    0 2px 5px rgba(0,0,0,0.3),
    inset 0 1px 0 rgba(255,255,255,0.3);
  transform: translateY(-1px);
}

.header .contact-button:active {
  background: linear-gradient(to bottom, #a40913, #bd6670);
  box-shadow: 
    inset 0 2px 3px rgba(0,0,0,0.2),
    inset 0 1px 0 rgba(255,255,255,0.2);
  transform: translateY(0);
}

.header .contact-button i {
  font-size: 16px;
  filter: drop-shadow(0 1px 1px rgba(0,0,0,0.3));
}
    .header::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translateX(-50%);
      width: 150%;
      height: 200%;
      background: radial-gradient(circle, rgba(0, 0, 0, 0.06) 40%, transparent 60%);
      border-radius: 50%;
    }
    .content-wrapper {
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
    }
    .content {
  display: flex;
  flex-direction: row;
  padding-top: 60px; /* To avoid overlapping with the header */
}

/* Left section for the apps */
.apps-section {
  position: fixed;
  top: 60px;      /* position below the header (adjust if needed) */
  left: 20px;     /* maintain the left margin */
  width: 300px;
  bottom: 0;      /* stretch to the bottom of the viewport */
  overflow-y: auto;  /* allow scrolling within the apps section if content overflows */
  margin: 0;      /* remove any margin that might affect its fixed positioning */
  z-index: 1001;  /* ensure it sits above other elements if necessary */
  pointer-events: none;  /* Ignore pointer events on the container background */
}
.apps-section * {
  pointer-events: auto;  /* Enable pointer events for all child elements */
}


/* Bar at the top of the apps section */
.apps-section .intro-bar {
  background: linear-gradient(180deg, #517fa4, #2c5d83);
  padding: 10px;
  height: 40px;
  border-radius: 10px;
  margin-bottom: 10px;
  margin-top: 30px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  
  /* Center content both vertically & horizontally */
  display: flex;
  align-items: center;
  justify-content: center;
  
  text-align: center;
}


.apps-section .intro-bar h2 {
  margin: 0;
  font-size: 18px;
  color: #fff;
  font-family: 'Lobster Two', cursive;
}

    .apps-section h3 {
  margin-bottom: 15px;
  font-size: 14px;
  color: #999;
  font-family: 'Poppins', sans-serif;
  text-align: center;
}
/* White area below the bar for app items */
.apps-container {
  background: white;
  padding: 10px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Individual app items */
.apps-container .app-item {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  padding: 10px;
  background: #f9f9f9;
  border-radius: 6px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.apps-container .app-item img {
  width: 60px;
  height: 60px;
  border-radius: 8px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.apps-container .app-item .app-info {
  margin-left: 10px;
  flex: 1;
}

.apps-container .app-item .app-info p {
  margin: 0;
  font-size: 14px;
  color: #333;
  margin-bottom: 5px;
}

.apps-container .app-item button {
  padding: 6px 12px;
  font-size: 14px;
  background: linear-gradient(180deg, #ff7969, #ff3597);
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.apps-container .app-item button:hover {
  background-color: #de1834;
}
    .photo-section {
      flex: 1;
      background-color: #f4f4f4;
      padding: 20px;
      margin-left: 319px;
    }
    
    .intro-white-island {
  background: white;
  padding: 20px;
  border-radius: 8px;
  display: flex;
  justify-content: space-between; 
  align-items: center;       /* Vertically center children */
  max-width: 1600px;
  margin: 10px auto 20px auto;
      margin-bottom: 50px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  
  /* Set a fixed height to control vertical space */
  height: 20px;  /* Adjust this value as needed */
}

    .intro-white-island h2 {
  margin: 0;
  font-size: 14.5px;        
  color: #ff7eb3;
  text-align: left;
  line-height: 30px;      
  font-family: 'Poppins', sans-serif;
}


    .button-container {
  display: flex;
  gap: 6px;        /* spacing between buttons */
}
    .button-container button {
      padding: 10px 20px;
      margin: 0 10px;
      font-size: 15px;
      font-weight: normal;
      border: 1px solid #ccc;
      border-radius: 6px;
      cursor: pointer;
      color: #ff7eb3;
      background: linear-gradient(to bottom, #ffffff, #f3f3f3);
      box-shadow: inset 0 1px 0 #fff, 0 2px 4px rgba(0, 0, 0, 0.2);
      text-shadow: 1px 1px 0 #fff;
      transition: background-color 0.3s, box-shadow 0.3s;
    }
    .button-container button:hover {
      background: linear-gradient(to bottom, #f5f5f5, #e6e6e6);
      box-shadow: inset 0 1px 0 #fff, 0 3px 6px rgba(0, 0, 0, 0.25);
    }
    .button-container button.active {
      background: linear-gradient(to bottom, #ff758c, #ff7eb3);
      color: white;
      text-shadow: none;
      border: 1px solid #d6516d;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
                  0 3px 6px rgba(0, 0, 0, 0.25);
    }
    .image-container {
      column-count: 4; /* images per row */
      column-gap: 15px;
    }
    .image-item {
      position: relative;
      margin-bottom: 15px;
      border-radius: 8px;
      overflow: hidden;
      break-inside: avoid;
      cursor: pointer;
    }
    .image-item img {
      width: 100%;
      display: block;
      border-radius: 8px;
      transition: transform 0.3s ease;
    }
    .image-item:hover img {
      transform: scale(1.05);
    }
    /* The "hover-bar" is for Flickr images only. We'll show it if data-ownername is present. */
    .image-item .hover-bar {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      padding: 10px;
      box-sizing: border-box;
      font-size: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      opacity: 0;
      transform: translateY(-100%);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    .image-item .hover-bar .owner-info {
      display: flex;
      flex-direction: column;
    }
    .image-item .hover-bar .follow-btn {
      background: #ffffff;
      color: #fd669a;
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      text-decoration: none;
      transition: background 0.3s ease;
    }
    .image-item .hover-bar .follow-btn:hover {
      background: #fd669a;
      color: white;
    }
    .image-item .heart-icon {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50px;
      height: 50px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .image-item .heart-icon svg {
      width: 35px;
      height: 30px;
      fill: white;
      cursor: pointer;
      transition: fill 0.3s ease;
    }
    @keyframes heart-bounce {
      0%   { transform: scale(1); }
      30%  { transform: scale(1.5); }
      60%  { transform: scale(0.9); }
      100% { transform: scale(1); }
    }
    .image-item .heart-icon.clicked svg {
      fill: #fd669a;
      animation: heart-bounce 0.4s ease;
    }
    .image-item:hover .hover-bar {
      opacity: 1;
      transform: translateY(0);
    }
    .image-item:hover .heart-icon {
      opacity: 1;
    }
    /* Hide hover-bar for items without data-posteddate, except for Imgur items */
.image-item:not([data-posteddate]):not([data-imgur]) .hover-bar {
  display: none !important;
}


    /* Hide manual images container by default; only show in "Supermarket" */
    #manualImagesContainer {
      display: none;
    }
    
    .image-item[data-imgur] .hover-bar {
  justify-content: flex-end;
}


    /* Modal Styles for Flickr images */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 192, 203, 0.5);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    .modal img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    }
    .modal .close-btn {
      position: absolute;
      top: 20px;
      right: 30px;
      font-size: 30px;
      color: white;
      background: transparent;
      border: none;
      cursor: pointer;
    }
    .modal .close-btn:hover {
      color: #ccc;
    }
    
    /* Bar below the modal image */
.modal .action-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  background: white;
  padding: 10px 20px;
  box-sizing: border-box;
  border-top: 1px solid #ccc;
  position: absolute;
  bottom: 0;
  left: 0;
}

/* Heart button in the action bar */
.modal .action-bar .heart-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 50px;
  height: 50px;
  background: rgba(0, 0, 0, 0.05);
  border-radius: 50%;
  cursor: pointer;
  transition: background 0.3s ease;
}

.modal .action-bar .heart-icon svg {
  width: 30px;
  height: 30px;
  fill: #fd669a;
}

.modal .action-bar .heart-icon.clicked svg {
  fill: #de1834;
}

/* Follow button in the action bar */
.modal .action-bar .follow-btn {
  background: #fff;
  color: #fd669a;
  padding: 5px 10px;
  border: 1px solid #fd669a;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  transition: background 0.3s ease, color 0.3s ease;
}

.modal .action-bar .follow-btn:hover {
  background: #fd669a;
  color: white;
}


    /* Modal Styles for manually added images */
    .manual-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 192, 203, 0.5);
      z-index: 3000;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
    }
    .manual-modal-content {
  position: relative; /* Ensures absolute children are positioned relative to this container */
  background: #fff;
  display: flex;
  flex-direction: row;
  width: 100%;
  max-width: 1200px;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}
    .manual-modal-image-wrapper {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    /* Fill the image area with no extra space */
    .manual-modal-image-wrapper img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .manual-modal-info {
      flex: 1;
      padding: 30px 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .manual-modal-info h2 {
      margin-bottom: -40px;
      font-size: 26px;
      color: #444;
      line-height: 1.5;
    }
    #manualModalPrice {
      margin-bottom: 0px;
      font-size: 40px;
      line-height: 2;
      font-weight: 300;
      color: #0f743b;
    }
    .manual-modal-info p {
      margin-bottom: 20px;
      font-size: 17px;
      line-height: 1.4;
      color: #666;
    }
    /* Buttons in the manual modal */
    .manual-modal-actions {
      display: flex;
      align-items: center;
      margin-top: 10px;
    }
    .manual-modal .close-btn {
  position: absolute;
  top: 10px; 
  right: 10px; 
  font-size: 35px;
  color: #999; 
  background: transparent;
  border: none;
  cursor: pointer;
  z-index: 10;
}

.manual-modal .close-btn:hover {
  color: #222;
}
    /* Additional Buttons */
    .tutorial-btn,
    .try-btn,
    .get-btn {
      margin-right: 10px;
      margin-top: 5px;
      padding: 8px 16px;
      font-size: 17px;
      cursor: pointer;
      border-radius: 5px;
      outline: none;
    }
    /* Watch tutorial */
    .tutorial-btn {
      border: 2px solid #ffae00;
      color: #ffae00;
      background: transparent;
    }
    .tutorial-btn:hover {
      background: #ffae00;
      color: #fff;
    }
    /* Try it => border only */
    .try-btn {
      background: linear-gradient(180deg, #ff7969, #ff3597);
      color: #fff;
      border: 2px solid #fd669a;
    }
    .try-btn:hover {
      background: #fd669a;
      color: #fff;
    }
    /* Get it => styled like your old image buttons */
    .get-btn {
      background: #55bc75;
      color: #fff;
      border: 1px solid #ccc;
    }
    .get-btn:hover {
      background: #41a461;
      color: #fff;
    }

    /* 
      BIG GET BUTTON
      Make this button full-width below the other buttons 
    */
    .big-get-btn {
      display: block;
      margin-top: 20px;
      margin-right: 0;
      width: 100%;
      align-self: center;
      font-size: 20px;
      text-align: center;
      padding: 14px 0;
    }
    
    #loadingIndicator {
  font-size: 45px;
  text-align: center;
  padding: 20px;
      color: pink;
}


    .mobile-message {
  display: flex;
  flex-direction: column; /* Stack children vertically */
  align-items: center;    /* Center align children */
  justify-content: center;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(to bottom, #e24157, #de1834);
  z-index: 9999;
  text-align: center;
  padding: 20px;
  font-family: 'Poppins', sans-serif;
  animation: fadeIn 0.5s ease;
  box-sizing: border-box;
}

.mobile-content {
  max-width: 90%; /* Ensure the content fits within the screen */
  background: rgba(255, 255, 255, 0.95);
  padding: 20px;
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  text-align: center;
  box-sizing: border-box;
}

.mobile-logo {
  font-family: 'Lobster', cursive;
  font-size: 2rem;
  color: #de1834;
  margin-bottom: 1rem;
}

.mobile-message p {
  font-size: 1rem;
  color: #444;
  line-height: 1.4;
  margin: 0.5rem 0;
}

.mobile-emoji {
  font-size: 2.5rem;
  margin-bottom: 1rem;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-10px); }
  60% { transform: translateY(-5px); }
}

@media (max-width: 768px) {
  .mobile-content {
    padding: 15px;
  }
  .mobile-logo {
    font-size: 1.8rem;
  }
  .mobile-message p {
    font-size: 0.9rem;
  }
}

/* Add the styling for the image below */
.mobile-image {
  display: block;
  max-width: 80%; /* Adjust width as needed */
  margin: 0px auto 0; /* Center the image and add spacing */
  border-radius: 10px; /* Optional: Rounded corners */
  
}


    
  </style>
</head>
  <link href="https://fonts.googleapis.com/css2?family=Lobster+Two&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
<body>
  
  <div class="mobile-message">
  <div class="mobile-content">
    <div class="mobile-logo">Boss in Pajamas</div>
    <div class="mobile-emoji">💻</div>
    <p>Hi there!! 👋</p>
    <p>My website isn’t designed for phone screens on purpose. Why? Because it’s packed with surprises and powerful features that work best on a computer.</p>
    <p>Please switch to a computer to unlock all the tools you need to start building your dream business—right from the comfort of your pajamas!☺️</p>
  </div>
  <!-- Add the image directly here -->
  <img src="https://i.ibb.co/0YPF24N/Bella-47.png" alt="Decorative Image" class="mobile-image">
</div>



  
  <!-- Header -->
<div class="header">
  <span class="time"></span>
  <span class="title">Boss in Pajamas</span>
  <a href="https://payhip.com/Bossinpajamas/contact" class="contact-button">
    <i class="fas fa-envelope"></i> Contact
  </a>
</div>

<!-- Main Content Wrapper -->
<div class="content-wrapper">
  <div class="content">
    <!-- Left Section for Apps -->
    <div class="apps-section">
      <div class="intro-bar">
        <h2>My Apps</h2>
      </div>
      <h3>Let's Enjoy the internet Again</h3>
      <div class="apps-container">
        <div class="app-item">
          <img src="https://i.ibb.co/m9cMWDZ/Bella-35.png" alt="Budget App">
          <div class="app-info">
            <p>Budget Planner</p>
            <a href="budget-planner.html">
  <button>Open App</button>
</a>
          </div>
        </div>
        <!-- New Third App Item -->
        <div class="app-item">
          <img src="https://i.ibb.co/60FPTzB/Bella-40.png" alt="New App">
          <div class="app-info">
            <p>Canva App</p>
            <a href="https://www.canva.com" target="_blank">
  <button>Open App</button>
</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Section -->
    <div class="photo-section">
      <div class="intro-white-island">
        <h2>Because Most small business owners work in their pajamas</h2>
        <div class="button-container">
          <button id="showMarket">
        Supermarket <i class="fas fa-shopping-cart"></i>
    </button>
          <button id="showTipsQuotes">Tips & Inspiration</button>
          <button id="showExplore">
        Explore <i class="fas fa-plane"></i>
    </button>
          <button id="showFavorites">
        Favorites <i class="fas fa-star"></i>
    </button>
        </div>
      </div>

      <!-- Manually Added Photos (Initially hidden, we will show it on DOMContentLoaded) -->
      <div class="image-container" id="manualImagesContainer">
        <!-- 1st Manual Image -->
        <div class="image-item manual"
             data-title="Canva Website Template for Candles Small Business Owners"
             data-price="€12"
             data-description="This Canva website template is specifically designed for small business owners in the candle industry 🕯️ who want a professional and stylish online presence without the expense of hiring a website developer 💻 or paying for website platforms 💸. Canva websites are completely free to host, and they provide you with a free link to share your website 🌐. However, if you want a custom domain (e.g., www.YourBusinessName.com), you’ll need to purchase it separately and link it to your Canva website 🛠️. This pre-built template is incredibly easy to use—just update the text ✍️, drag and drop your images 🖼️, and add your PayPal button links 💳 for seamless payment integration. While Canva websites don’t process payments directly, linking PayPal is simple and effective ✅. Test it yourself by clicking the Try This Website button below 👇"
             data-try="https://photographeaparis.my.canva.site/candlesandco"
             data-get="https://payhip.com/b/rptRL">
          <img src="https://i.ibb.co/6F5nqWG/Candles-Website-28.png" alt="Candles Website" />
          <!-- Heart icon -->
          <div class="heart-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
              <path d="M16 29.6l-2.2-2C7 21.9 2 16.8 2 11.2 2 6.6 5.6 3 10.2 3c2.7 0 5.3 1.5 6.8 3.8C18.5 4.5 21.1 3 23.8 3 28.4 3 32 6.6 32 11.2c0 5.6-5 10.7-11.8 16.4L16 29.6z"/>
            </svg>
          </div>
        </div>
        
        <!-- 5th Manual Image -->
        <div class="image-item manual"
             data-title="Canva Website Template for Bead bracelets, Earrings, Polymer clay creations, Rings, Cute rugs, and Knitting Small Businesses"
             data-price="€12"
             data-description="This Canva website template is specifically designed for small business owners in the creative crafts industry, including bead bracelets 📿, earrings 💍, polymer clay creations 🎨, rings 💫, cute rugs 🧶, and knitting projects 🧵, who want a professional and stylish online presence without the expense of hiring a website developer 💻 or paying for website platforms 💸. Canva websites are completely free to host, and they provide you with a free link to share your website 🌐. However, if you want a custom domain (e.g., www.YourBusinessName.com), you’ll need to purchase it separately and link it to your Canva website 🛠️. This pre-built template is incredibly easy to use—just update the text ✍️, drag and drop your images 🖼️, and add your PayPal button links 💳 for seamless payment integration. While Canva websites don’t process payments directly, linking PayPal is simple and effective ✅. Test it yourself by clicking the Try This Website button below 👇"
             data-tutorial="https://youtube.com/YourCozyDreamsTutorial"
             data-try="https://photographeaparis.my.canva.site/justbella"
             data-get="https://payhip.com/b/JMFjw">
          <img src="https://i.ibb.co/SPkSJrj/Candles-Website-29.png" alt="Cozy Dreams" />
          <div class="heart-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
              <path d="M16 29.6l-2.2-2C7 21.9 2 16.8 2 11.2 2 6.6 5.6 3 10.2 3c2.7 0 5.3 1.5 6.8 3.8C18.5 4.5 21.1 3 23.8 3 28.4 3 32 6.6 32 11.2c0 5.6-5 10.7-11.8 16.4L16 29.6z"/>
            </svg>
          </div>
        </div>

        <!-- 2nd Manual Image -->
        <div class="image-item manual"
             data-title="Canva Website Template for Jewelry Small Business Owners"
             data-price="€12"
             data-description="This Canva website template is specifically designed for small business owners in the jewelry industry 💎 who want a professional and stylish online presence without the expense of hiring a website developer 💻 or paying for website platforms 💸. Canva websites are completely free to host, and they provide you with a free link to share your website 🌐. However, if you want a custom domain (e.g., www.YourBusinessName.com), you’ll need to purchase it separately and link it to your Canva website 🛠️. This pre-built template is incredibly easy to use—just update the text ✍️, drag and drop your images 🖼️, and add your PayPal button links 💳 for seamless payment integration. While Canva websites don’t process payments directly, linking PayPal is simple and effective ✅. Test it yourself by clicking the Try This Website button below 👇"
             data-tutorial="https://youtube.com/YourPajamasTutorial"
             data-try="https://photographeaparis.my.canva.site/jewelty"
             data-get="https://payhip.com/b/QnyKN">
          <img src="https://i.ibb.co/3StLdPq/Candles-Website-25.png" alt="Pajamas Boss" />
          <div class="heart-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
              <path d="M16 29.6l-2.2-2C7 21.9 2 16.8 2 11.2 2 6.6 5.6 3 10.2 3c2.7 0 5.3 1.5 6.8 3.8C18.5 4.5 21.1 3 23.8 3 28.4 3 32 6.6 32 11.2c0 5.6-5 10.7-11.8 16.4L16 29.6z"/>
            </svg>
          </div>
        </div>
        
        
        <!-- 4th Manual Image -->
        <div class="image-item manual"
             data-title="Canva Website Template for Bohemian Small Business Owners"
             data-price="€12"
             data-description="This Canva website template is specifically designed for bohemian small business owners 🌿 who want a professional and stylish online presence without the expense of hiring a website developer 💻 or paying for website platforms 💸. Canva websites are completely free to host, and they provide you with a free link to share your website 🌐. However, if you want a custom domain (e.g., www.YourBusinessName.com), you’ll need to purchase it separately and link it to your Canva website 🛠️. This pre-built template is incredibly easy to use—just update the text ✍️, drag and drop your images 🖼️, and add your PayPal button links 💳 for seamless payment integration. While Canva websites don’t process payments directly, linking PayPal is simple and effective ✅. Test it yourself by clicking the Try This Website button below 👇."
             data-tutorial="https://youtube.com/YourCozyDreamsTutorial"
             data-try="https://photographeaparis.my.canva.site/bohemianstyle"
             data-get="https://payhip.com/b/X7BSV">
          <img src="https://i.ibb.co/W5RXpkj/Candles-Website-24.png" alt="Cozy Dreams" />
          <div class="heart-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
              <path d="M16 29.6l-2.2-2C7 21.9 2 16.8 2 11.2 2 6.6 5.6 3 10.2 3c2.7 0 5.3 1.5 6.8 3.8C18.5 4.5 21.1 3 23.8 3 28.4 3 32 6.6 32 11.2c0 5.6-5 10.7-11.8 16.4L16 29.6z"/>
            </svg>
          </div>
        </div>
        
        <!-- 3rd Manual Image -->
        <div class="image-item manual"
             data-title="Canva Website Template for Cakes Small Business Owners"
             data-price="€12"
             data-description="This Canva website template is specifically designed for small business owners in the cake industry 🎂 who want a professional and stylish online presence without the expense of hiring a website developer 💻 or paying for website platforms 💸. Canva websites are completely free to host, and they provide you with a free link to share your website 🌐. However, if you want a custom domain (e.g., www.YourBusinessName.com), you’ll need to purchase it separately and link it to your Canva website 🛠️. This pre-built template is incredibly easy to use—just update the text ✍️, drag and drop your images 🖼️, and add your PayPal button links 💳 for seamless payment integration. While Canva websites don’t process payments directly, linking PayPal is simple and effective ✅. Test it yourself by clicking the Try This Website button below 👇"
             data-tutorial="https://youtube.com/YourCozyDreamsTutorial"
             data-try="https://photographeaparis.my.canva.site/ellescakes"
             data-get="https://payhip.com/b/2r1fq">
          <img src="https://i.ibb.co/3yqqRSS/Candles-Website-21.png" alt="Cozy Dreams" />
          <div class="heart-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
              <path d="M16 29.6l-2.2-2C7 21.9 2 16.8 2 11.2 2 6.6 5.6 3 10.2 3c2.7 0 5.3 1.5 6.8 3.8C18.5 4.5 21.1 3 23.8 3 28.4 3 32 6.6 32 11.2c0 5.6-5 10.7-11.8 16.4L16 29.6z"/>
            </svg>
          </div>
        </div>
        
        <!-- 3rd Manual Image -->
        <div class="image-item manual"
             data-title="Canva Website Template for Small Businesses specializing in blankets, knitting, bohemian styles, and handmade creations"
             data-price="€12"
             data-description="This Canva website template is specifically designed for small business owners specializing in blankets 🛏️, knitting 🧶, bohemian styles 🌿, and handmade creations ✂️ who want a professional and stylish online presence without the expense of hiring a website developer 💻 or paying for website platforms 💸. Canva websites are completely free to host, and they provide you with a free link to share your website 🌐. However, if you want a custom domain (e.g., www.YourBusinessName.com), you’ll need to purchase it separately and link it to your Canva website 🛠️. This pre-built template is incredibly easy to use—just update the text ✍️, drag and drop your images 🖼️, and add your PayPal button links 💳 for seamless payment integration. While Canva websites don’t process payments directly, linking PayPal is simple and effective ✅. Test it yourself by clicking the Try This Website button below 👇"
             data-tutorial="https://youtube.com/YourCozyDreamsTutorial"
             data-try="https://photographeaparis.my.canva.site/chunkyblanckets"
             data-get="https://payhip.com/b/lRBb9">
          <img src="https://i.ibb.co/jTXB5yr/Candles-Website-30.png" alt="Cozy Dreams" />
          <div class="heart-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
              <path d="M16 29.6l-2.2-2C7 21.9 2 16.8 2 11.2 2 6.6 5.6 3 10.2 3c2.7 0 5.3 1.5 6.8 3.8C18.5 4.5 21.1 3 23.8 3 28.4 3 32 6.6 32 11.2c0 5.6-5 10.7-11.8 16.4L16 29.6z"/>
            </svg>
          </div>
        </div>
        
        
        
        
      </div>

      <!-- Container for Flickr/Explore or Favorites -->
      <div class="image-container" id="imageContainer">
        <!-- Dynamic images go here -->
      </div>
    </div>
  </div>
</div>

<!-- Modal for Flickr Image Preview -->
<div class="modal" id="imageModal">
    <button class="close-btn" id="closeModal">&times;</button>
    <img id="modalImage" src="" alt="" />
    <div class="action-bar" id="flickrActionBar">
        <div class="heart-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
                <path d="M16 29.6l-2.2-2C7 21.9 2 16.8 2 11.2 2 6.6 5.6 3 10.2 3c2.7 0 5.3 1.5 6.8 3.8C18.5 4.5 21.1 3 23.8 3 28.4 3 32 6.6 32 11.2c0 5.6-5 10.7-11.8 16.4L16 29.6z" />
            </svg>
        </div>
        <a href="#" class="follow-btn" id="followButton" target="_blank">Follow</a>
    </div>
</div>

<!-- Separate Modal for Manually Added Photos -->
<div class="manual-modal" id="manualImageModal">
  <div class="manual-modal-content">
    <button class="close-btn" id="closeManualModal">&times;</button>
    <div class="manual-modal-image-wrapper">
      <img id="manualModalImage" src="" alt="" />
    </div>
    <div class="manual-modal-info">
      <h2 id="manualModalTitle"></h2>
      <p id="manualModalPrice"></p>
      <p id="manualModalDescription"></p>

      <!-- Buttons -->
      <div class="manual-modal-actions">
        <button id="manualModalTutorialButton" class="tutorial-btn">Tutorial ( Soon )</button>
        <button id="manualModalTryButton" class="try-btn">Try this website</button>
      </div>
      <button id="manualModalGetButton" class="get-btn big-get-btn">Get this Website</button>
    </div>
  </div>
</div>


  <script>
    
    // Add this at the very top of your existing script
const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
if (isMobile || window.innerWidth < 1025) {
  // Prevent all API calls
  window.fetch = function() {
    return new Promise((resolve, reject) => {
      reject(new Error('Mobile devices blocked'));
    });
  };
  
  // Stop execution of other scripts
  throw new Error('Mobile access blocked');
}
// ==================================
// IndexedDB + Favorites Code
// ==================================
let db;
let favoritesSet = new Set();
let favoritesInfo = {};  // New global object to store detailed favorite info
let shuffledImgurImages = null;
let allFlickrPhotos = [];  // Global variable to store all Flickr photos

function initDB() {
  let request = indexedDB.open('FavoritesDB', 1);
  request.onupgradeneeded = function(e) {
    db = e.target.result;
    if (!db.objectStoreNames.contains('favorites')) {
      db.createObjectStore('favorites', { keyPath: 'src' });
    }
  };
  request.onsuccess = function(e) {
    db = e.target.result;
    getAllFavorites().then(favorites => {
      favorites.forEach(photo => {
        favoritesSet.add(photo.src);
        favoritesInfo[photo.src] = photo;  // Store detailed info
      });
      updateManualHearts();
    });
  };
  request.onerror = function(e) {
    console.error('Error opening DB', e);
  };
}

function updateManualHearts() {
  const manualImagesContainer = document.getElementById('manualImagesContainer');
  if (!manualImagesContainer) return;
  manualImagesContainer.querySelectorAll('.image-item.manual').forEach(item => {
    const img = item.querySelector('img');
    const heartIcon = item.querySelector('.heart-icon');
    if (favoritesSet.has(img.src)) {
      heartIcon.classList.add('clicked');
    } else {
      heartIcon.classList.remove('clicked');
    }
  });
}

function addFavorite(photo) {
  let transaction = db.transaction(['favorites'], 'readwrite');
  let store = transaction.objectStore('favorites');
  store.put(photo);
  favoritesSet.add(photo.src);
  favoritesInfo[photo.src] = photo;  // Save detailed info
}

function removeFavorite(src) {
  return new Promise((resolve, reject) => {
    let transaction = db.transaction(['favorites'], 'readwrite');
    let store = transaction.objectStore('favorites');
    let request = store.delete(src);
    request.onsuccess = function() {
      favoritesSet.delete(src);
      delete favoritesInfo[src];  // Remove detailed info
      resolve();
    };
    request.onerror = function() {
      reject(request.error);
    };
  });
}

function getAllFavorites() {
  return new Promise((resolve, reject) => {
    let transaction = db.transaction(['favorites'], 'readonly');
    let store = transaction.objectStore('favorites');
    let request = store.getAll();
    request.onsuccess = function() {
      resolve(request.result);
    };
    request.onerror = function() {
      reject(request.error);
    };
  });
}

// ==================================
// Local Storage Cache Helpers
// ==================================
function saveToLocalCache(key, data) {
  const cachedObject = {
    timestamp: Date.now(),
    data,
  };
  localStorage.setItem(key, JSON.stringify(cachedObject));
}

function loadFromLocalCache(key) {
  const cachedObjectString = localStorage.getItem(key);
  if (!cachedObjectString) return null;
  const cachedObject = JSON.parse(cachedObjectString);
  if (Date.now() - cachedObject.timestamp > 3600 * 1000) {
    localStorage.removeItem(key);
    return null;
  }
  return cachedObject.data;
}

// ==================================
// Utility Functions
// ==================================
function formatDate(dateString) {
  if (!dateString) return 'Unknown';
  const date = new Date(dateString);
  const now = new Date();
  if (date.getFullYear() === now.getFullYear()) {
    return date.toLocaleString('default', { month: 'short' });
  }
  return date.getFullYear().toString();
}

function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function preloadImages(photos) {
  return Promise.all(
    photos.map(photo => new Promise(resolve => {
      const tempImg = new Image();
      tempImg.src = photo.src;
      tempImg.onload = () => resolve(photo);
      tempImg.onerror = () => resolve(photo);
    }))
  );
}

// ==================================
// Synchronization Helper
// ==================================
function updateHeartsBySrc(src) {
  document.querySelectorAll(`img[src="${src}"]`).forEach(img => {
    const parent = img.closest('.image-item');
    if(parent) {
      const heart = parent.querySelector('.heart-icon');
      const svg = heart?.querySelector('svg');
      if(heart && svg) {
        if(favoritesSet.has(src)) { 
          heart.classList.add('clicked'); 
          svg.style.fill = '#fd669a';
        } else { 
          heart.classList.remove('clicked'); 
          svg.style.fill = 'white';
        }
      }
    }
  });
}

// ==================================
// Flickr Photos Fetching
// ==================================
const flickrApiKey = '230b0c28e88f942cd75c5b678c4e4ec9';

async function fetchFlickrPhotos() {
  const cachedData = loadFromLocalCache('flickrPhotos');
  if (cachedData) {
    console.log('Loading Flickr photos from cache...');
    return cachedData;
  }
  console.log('Fetching new Flickr photos from API...');
  const galleryIds = ['72157723437036523', '72157723445174473', '72157723451979518', '72157723463273984'];
  const fetchPromises = galleryIds.map(async (galleryId) => {
    const flickrUrl = `https://api.flickr.com/services/rest/?method=flickr.galleries.getPhotos&api_key=${flickrApiKey}&gallery_id=${galleryId}&extras=owner_name,date_taken&format=json&nojsoncallback=1`;
    try {
      const response = await fetch(flickrUrl);
      const data = await response.json();
      return data.photos.photo.map(photo => ({
        src: `https://live.staticflickr.com/${photo.server}/${photo.id}_${photo.secret}_b.jpg`,
        alt: photo.title,
        postedDate: new Date(photo.datetaken).getFullYear().toString(),
        galleryLink: `https://www.flickr.com/photos/201201669@N06/galleries/${galleryId}/`,
        manual: false
      }));
    } catch (error) {
      console.error('Error fetching Flickr photos:', error);
      return [];
    }
  });
  const photosArrays = await Promise.all(fetchPromises);
  const newPhotos = photosArrays.flat();
  saveToLocalCache('flickrPhotos', newPhotos);
  return newPhotos;
}

// ==================================
// Imgur Photos Fetching with Cache
// ==================================
const imgurClientId = 'a75a4e2cb0da4e1';
const imgurAlbumHash = 'NkI6i5g';

function extractPinterestLink(description) {
  if (description) {
    const match = description.match(/(https?:\/\/[^\s]+)/i);
    if (match && match[1] && match[1].includes('pinterest.com')) {
      return match[1];
    }
  }
  return null;
}

async function fetchImgurImages() {
  const cacheKey = 'imgurPhotos';
  const cachedData = loadFromLocalCache(cacheKey);
  if (cachedData) {
    console.log('Loading Imgur photos from cache...');
    return cachedData;
  }
  try {
    const response = await fetch(`https://api.imgur.com/3/album/${imgurAlbumHash}/images`, {
      headers: {
        Authorization: `Client-ID ${imgurClientId}`,
      },
    });
    const data = await response.json();
    if (data.success) {
      // Get all images from the album
      const allImages = data.data;
      // Shuffle all images to randomize the order
      shuffleArray(allImages);
      // Take the first 40 images after shuffling
      const images = allImages.slice(0, 40).map(img => ({
        src: img.link,
        alt: img.description || 'Tips & Quotes image',
        pinterestLink: extractPinterestLink(img.description),
        manual: false,
      }));
      saveToLocalCache(cacheKey, images);
      return images;
    } else {
      console.error('Failed to fetch Imgur images:', data);
      return [];
    }
  } catch (error) {
    console.error('Error fetching Imgur images:', error);
    return [];
  }
}


// ==================================
// Modals
// ==================================
function openFlickrModal(src, alt, pinterestLink) {
  const imageModal = document.getElementById('imageModal');
  const modalImage = document.getElementById('modalImage');
  const actionBar = document.getElementById('flickrActionBar');
  const followButton = document.getElementById('followButton');
  const heartIcon = actionBar.querySelector('.heart-icon');
  const svg = heartIcon.querySelector('svg');

  modalImage.src = src;
  modalImage.alt = alt;

  let galleryLink = null;
  if(allFlickrPhotos && allFlickrPhotos.length){
    const found = allFlickrPhotos.find(p => p.src === src);
    if(found) galleryLink = found.galleryLink;
  }

  modalImage.onload = () => {
    const topMargin = 20;
    const bottomMargin = 20;
    modalImage.style.marginTop = topMargin + 'px';
    const availableHeight = window.innerHeight - topMargin - bottomMargin - 50; // 50 for action bar
    const rect = modalImage.getBoundingClientRect();
    if(rect.height > availableHeight) {
      modalImage.style.height = availableHeight + 'px';
    }
    const newRect = modalImage.getBoundingClientRect();
    actionBar.style.position = 'absolute';
    actionBar.style.top = (newRect.bottom) + 'px';
    actionBar.style.left = newRect.left + 'px';
    actionBar.style.width = newRect.width + 'px';
    actionBar.style.height = '50px';
    actionBar.style.marginBottom = bottomMargin + 'px';
    let prospectiveBottom = newRect.bottom + 50 + bottomMargin;
    if(prospectiveBottom > window.innerHeight) {
      actionBar.style.top = (window.innerHeight - bottomMargin - 50) + 'px';
    }
  };

  if (!galleryLink) {
    const fav = favoritesInfo[src];
    if(fav && fav.pinterestLink) {
      pinterestLink = fav.pinterestLink;
    }
  }

  if (galleryLink) {
    followButton.href = galleryLink;
    followButton.style.display = 'inline-block';
    followButton.style.textDecoration = 'none';
  } else if (pinterestLink) {
    followButton.href = pinterestLink;
    followButton.style.display = 'inline-block';
    followButton.style.textDecoration = 'none';
  } else {
    followButton.style.display = 'none';
  }

  actionBar.style.display = 'flex';
  heartIcon.classList.toggle('clicked', favoritesSet.has(src));

  if (heartIcon.classList.contains('clicked')) {
    svg.style.fill = '#fd669a';
  } else {
    svg.style.fill = 'white';
  }

  heartIcon.onclick = () => {
    const wasClicked = heartIcon.classList.contains('clicked');
    heartIcon.classList.toggle('clicked');

    if (heartIcon.classList.contains('clicked')) {
      svg.style.fill = '#fd669a';
      svg.style.animation = 'heart-bounce 0.4s ease';
    } else {
      svg.style.fill = 'white';
      svg.style.animation = '';
    }

    const photo = { src, alt, galleryLink };
    if(pinterestLink) photo.pinterestLink = pinterestLink;
    if (!wasClicked) {
      addFavorite(photo);
      updateHeartsBySrc(src);
    } else {
      removeFavorite(src).then(() => {
        if (document.getElementById('showFavorites').classList.contains('active')) {
          const imageItem = document.querySelector(`.image-item img[src="${src}"]`)?.closest('.image-item');
          if (imageItem) imageItem.remove();
        }
        updateHeartsBySrc(src);
      });
    }
  };

  imageModal.style.display = 'flex';
}

function openManualModal(src, title, price, description, tutorial, tryIt, getLink) {
  const manualImageModal = document.getElementById('manualImageModal');
  const manualModalImage = document.getElementById('manualModalImage');
  const manualModalTitle = document.getElementById('manualModalTitle');
  const manualModalPrice = document.getElementById('manualModalPrice');
  const manualModalDescription = document.getElementById('manualModalDescription');
  const manualModalTutorialButton = document.getElementById('manualModalTutorialButton');
  const manualModalTryButton = document.getElementById('manualModalTryButton');
  const manualModalGetButton = document.getElementById('manualModalGetButton');

  manualModalImage.src = src || '';
  manualModalImage.alt = title || '';
  manualModalTitle.textContent = title || '';
  manualModalPrice.textContent = price || '';
  manualModalDescription.textContent = description || '';

  manualModalTutorialButton.onclick = () => {
    if (tutorial) window.open(tutorial, '_blank');
  };
  manualModalTryButton.onclick = () => {
    if (tryIt) window.open(tryIt, '_blank');
  };
  manualModalGetButton.onclick = () => {
    if (getLink) window.open(getLink, '_blank');
  };

  manualImageModal.style.display = 'flex';
}

// ==================================
// Display + Append Photos Functions
// ==================================
function displayPhotos(photos, shouldShuffle = true) {
  const imageContainer = document.getElementById('imageContainer');
  imageContainer.innerHTML = '';
  if (shouldShuffle) shuffleArray(photos);

  const fragment = document.createDocumentFragment();
  photos.forEach(photo => {
    const { src, alt, postedDate, galleryLink, manual, pinterestLink } = photo;
    const divItem = document.createElement('div');
    divItem.className = 'image-item';

    if (manual) {
      divItem.classList.add('manual');
      divItem.dataset.title = photo.manualTitle || '';
      divItem.dataset.price = photo.manualPrice || '';
      divItem.dataset.description = photo.manualDescription || '';
      divItem.dataset.tutorial = photo.manualTutorial || '';
      divItem.dataset.try = photo.manualTry || '';
      divItem.dataset.get = photo.manualGet || '';
    } else {
      divItem.setAttribute('data-posteddate', postedDate);
      divItem.setAttribute('data-gallerylink', galleryLink);
      if (pinterestLink) {
        divItem.setAttribute('data-imgur', 'true');
      }
    }

    let hoverBarContent = '';
    if(pinterestLink) {
      hoverBarContent = `
        <div class="hover-bar">
          <a href="${pinterestLink}" class="follow-btn" target="_blank">Follow</a>
        </div>`;
    } else if (postedDate && galleryLink) {
      hoverBarContent = `
        <div class="hover-bar">
          <div class="year-info">
            <span>${postedDate}</span>
          </div>
          <a href="${galleryLink}" class="follow-btn" target="_blank">Follow</a>
        </div>`;
    }

    divItem.innerHTML = `
      <img src="${src}" alt="${alt}">
      ${hoverBarContent}
      <div class="heart-icon ${favoritesSet.has(src) ? 'clicked' : ''}">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
          <path d="M16 29.6l-2.2-2C7 21.9 2 16.8 2 11.2 
                   2 6.6 5.6 3 10.2 3c2.7 0 5.3 1.5 
                   6.8 3.8C18.5 4.5 21.1 3 23.8 3 
                   28.4 3 32 6.6 32 11.2c0 5.6-5 10.7-11.8 
                   16.4L16 29.6z"/>
        </svg>
      </div>
    `;

    divItem.addEventListener('click', (ev) => {
      if (ev.target.closest('.heart-icon')) return;
      if (ev.target.closest('.follow-btn')) return;

      if (divItem.classList.contains('manual')) {
        const { title, price, description, tutorial, try: tryIt, get } = divItem.dataset;
        openManualModal(src, title, price, description, tutorial, tryIt, get);
      } else {
        openFlickrModal(src, alt);
      }
    });

    fragment.appendChild(divItem);
  });
  imageContainer.appendChild(fragment);
}

function appendPhotos(photos) {
  const imageContainer = document.getElementById('imageContainer');
  shuffleArray(photos);
  const fragment = document.createDocumentFragment();
  photos.forEach(photo => {
    const {
      src, alt, ownerName, postedDate, profileLink,
      manual
    } = photo;

    const divItem = document.createElement('div');
    divItem.className = 'image-item';

    if (!manual && ownerName) {
      divItem.setAttribute('data-ownername', ownerName);
      divItem.setAttribute('data-posteddate', postedDate);
      divItem.setAttribute('data-profilelink', profileLink);
    }

    let hoverBarContent = '';
    if (ownerName && profileLink) {
      hoverBarContent = `
        <div class="hover-bar">
          <div class="owner-info">
            <span>${ownerName}</span>
            <span>${postedDate}</span>
          </div>
          <a href="${profileLink}" class="follow-btn" target="_blank">Follow</a>
        </div>`;
    }

    divItem.innerHTML = `
      <img src="${src}" alt="${alt}">
      ${hoverBarContent}
      <div class="heart-icon ${favoritesSet.has(src) ? 'clicked' : ''}">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
          <path d="M16 29.6l-2.2-2C7 21.9 2 16.8 2 11.2 
                   2 6.6 5.6 3 10.2 3c2.7 0 5.3 1.5 
                   6.8 3.8C18.5 4.5 21.1 3 23.8 3 
                   28.4 3 32 6.6 32 11.2c0 5.6-5 10.7-11.8 
                   16.4L16 29.6z"/>
        </svg>
      </div>
    `;

    divItem.addEventListener('click', (ev) => {
      if (ev.target.closest('.heart-icon')) return;
      if (divItem.classList.contains('manual')) {
        const { title, price, description, tutorial, try: tryIt, get } = divItem.dataset;
        openManualModal(src, title, price, description, tutorial, tryIt, get);
      } else {
        openFlickrModal(src, alt);
      }
    });

    fragment.appendChild(divItem);
  });
  imageContainer.appendChild(fragment);
}

// ==================================
// Display Imgur Tips & Quotes Photos
// ==================================
function displayTipsQuotesPhotos(photos) {
  const imageContainer = document.getElementById('imageContainer');
  imageContainer.innerHTML = '';
  const fragment = document.createDocumentFragment();

  photos.forEach(photo => {
    const divItem = document.createElement('div');
    divItem.className = 'image-item';
    divItem.setAttribute('data-imgur', 'true');

    divItem.innerHTML = `
      <img src="${photo.src}" alt="${photo.alt}">
      <div class="hover-bar">
        ${photo.pinterestLink ? `<a href="${photo.pinterestLink}" class="follow-btn" target="_blank" style="text-decoration: none;">Follow</a>` : ''}
      </div>
      <div class="heart-icon ${favoritesSet.has(photo.src) ? 'clicked' : ''}">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
          <path d="M16 29.6l-2.2-2C7 21.9 2 16.8 2 11.2 
                   2 6.6 5.6 3 10.2 3c2.7 0 5.3 1.5 
                   6.8 3.8C18.5 4.5 21.1 3 23.8 3 
                   28.4 3 32 6.6 32 11.2c0 5.6-5 10.7-11.8 
                   16.4L16 29.6z"/>
        </svg>
      </div>
    `;

    divItem.addEventListener('click', (ev) => {
      if (ev.target.closest('.heart-icon') || ev.target.closest('.follow-btn')) return;
      openFlickrModal(photo.src, photo.alt, photo.pinterestLink);
    });

    fragment.appendChild(divItem);
  });

  imageContainer.appendChild(fragment);
}

async function fetchImgurImages() {
  const cacheKey = 'imgurPhotos';
  const cachedData = loadFromLocalCache(cacheKey);
  if (cachedData) {
    console.log('Loading Imgur photos from cache...');
    return cachedData;
  }
  try {
    const response = await fetch(`https://api.imgur.com/3/album/${imgurAlbumHash}/images`, {
      headers: {
        Authorization: `Client-ID ${imgurClientId}`,
      },
    });
    const data = await response.json();
    if (data.success) {
      const images = data.data.slice(0, 40).map(img => ({
        src: img.link,
        alt: img.description || 'Tips & Quotes image',
        pinterestLink: extractPinterestLink(img.description),
        manual: false,
      }));
      saveToLocalCache(cacheKey, images);
      return images;
    } else {
      console.error('Failed to fetch Imgur images:', data);
      return [];
    }
  } catch (error) {
    console.error('Error fetching Imgur images:', error);
    return [];
  }
}

// ==================================
// Main DOMContentLoaded
// ==================================
document.addEventListener('DOMContentLoaded', async () => {
  initDB();
  
  const timeElement = document.querySelector('.header .time');
  function updateTime() {
    const now = new Date();
    const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    let hours = now.getHours();
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const period = hours >= 12 ? 'PM' : 'AM';
    hours = hours % 12 || 12;
    timeElement.textContent = `${hours}:${minutes} ${period} - Summer 2012`;
  }
  setInterval(updateTime, 1000);
  updateTime();

  const showMarketButton = document.getElementById('showMarket');
  const showExploreButton = document.getElementById('showExplore');
  const showFavoritesButton = document.getElementById('showFavorites');
  const showTipsQuotesButton = document.getElementById('showTipsQuotes');

  const imageModal = document.getElementById('imageModal');
  const closeModal = document.getElementById('closeModal');
  const manualImageModal = document.getElementById('manualImageModal');
  const closeManualModal = document.getElementById('closeManualModal');

  const manualImagesContainer = document.getElementById('manualImagesContainer');
  const imageContainer = document.getElementById('imageContainer');

  closeModal.addEventListener('click', () => {
    imageModal.style.display = 'none';
    document.getElementById('modalImage').src = '';
  });
  closeManualModal.addEventListener('click', () => {
    manualImageModal.style.display = 'none';
    document.getElementById('manualModalImage').src = '';
  });

  let cachedFlickrPhotos = null;
  let explorePhotos = [];
  let exploreIndex = 0;

  function initialRender() {
    showMarketButton.classList.add('active');
    manualImagesContainer.style.display = 'block';
  }
  initialRender();

  cachedFlickrPhotos = await fetchFlickrPhotos();
  if (cachedFlickrPhotos?.length) {
    allFlickrPhotos = cachedFlickrPhotos;
    shuffleArray(cachedFlickrPhotos);
    explorePhotos = cachedFlickrPhotos.slice(0, 500);
  }
  
  const preloadedImgurPhotos = await fetchImgurImages();
  if (preloadedImgurPhotos.length) {
    await preloadImages(preloadedImgurPhotos);
    // Shuffle Imgur images once on initial visit/refresh
    shuffledImgurImages = [...preloadedImgurPhotos];
    shuffleArray(shuffledImgurImages);
  }

  manualImagesContainer.querySelectorAll('.image-item.manual').forEach(item => {
    item.addEventListener('click', (e) => {
      if (e.target.closest('.heart-icon')) return;
      const { title, price, description, tutorial, try: tryIt, get } = item.dataset;
      const img = item.querySelector('img');
      openManualModal(img.src, title, price, description, tutorial, tryIt, get);
    });
  });

  showMarketButton.addEventListener('click', () => {
    showMarketButton.classList.add('active');
    showExploreButton.classList.remove('active');
    showFavoritesButton.classList.remove('active');
    showTipsQuotesButton.classList.remove('active');
    manualImagesContainer.style.display = 'block';
    imageContainer.innerHTML = '';
    const morePhotosButton = document.getElementById('morePhotosButton');
    if (morePhotosButton) morePhotosButton.style.display = 'none';
  });

  showExploreButton.addEventListener('click', () => {
    manualImagesContainer.style.display = 'none';
    if (!showExploreButton.classList.contains('active')) {
      showExploreButton.classList.add('active');
      showMarketButton.classList.remove('active');
      showFavoritesButton.classList.remove('active');
      showTipsQuotesButton.classList.remove('active');

      let morePhotosButton = document.getElementById('morePhotosButton');
      if (!morePhotosButton) {
        morePhotosButton = document.createElement('button');
        morePhotosButton.id = 'morePhotosButton';
        morePhotosButton.textContent = 'More Photos';
        morePhotosButton.style.cssText = 'display:none; margin:20px auto; padding:10px 20px; font-size:16px; cursor:pointer;';
        imageContainer.parentNode.appendChild(morePhotosButton);
      } else {
        morePhotosButton.style.display = 'none';
      }

      let loadingIndicator = document.createElement('div');
      loadingIndicator.id = 'loadingIndicator';
      loadingIndicator.textContent = 'Loading...';
      imageContainer.parentNode.insertBefore(loadingIndicator, imageContainer);

      exploreIndex = 80;
      preloadImages(explorePhotos.slice(0, 80)).then(preloaded => {
        displayPhotos(preloaded, false);
        loadingIndicator.remove();
        morePhotosButton.style.display = 'block';
      });

      morePhotosButton.onclick = () => {
        const nextBatch = explorePhotos.slice(exploreIndex, exploreIndex + 80);
        if (nextBatch.length) {
          exploreIndex += 80;
          preloadImages(nextBatch).then(preloaded => {
            appendPhotos(preloaded);
          });
        }
      };
    }
  });

  showFavoritesButton.addEventListener('click', async () => {
    manualImagesContainer.style.display = 'none';
    const favorites = await getAllFavorites();
    
    if (favorites.length === 0) {
      imageContainer.innerHTML = `
  <div style="display: flex; align-items: flex-start; justify-content: center; height: calc(100vh - 60px); text-align: center; color: #888; font-size: 18px; position: relative;">
    <p style="
      position: absolute; 
      right: 45%; 
      top: 50%; 
      transform: translateY(-50%);
    ">
      Your Favorites section is empty.<br>Start adding some!
    </p>
  </div>
`;
    } else {
      displayPhotos(favorites, false);
    }

    showFavoritesButton.classList.add('active');
    showExploreButton.classList.remove('active');
    showMarketButton.classList.remove('active');
    showTipsQuotesButton.classList.remove('active');
    
    const morePhotosButton = document.getElementById('morePhotosButton');
    if (morePhotosButton) morePhotosButton.style.display = 'none';
  });

  showTipsQuotesButton.addEventListener('click', async () => {
    showTipsQuotesButton.classList.add('active');
    showMarketButton.classList.remove('active');
    showExploreButton.classList.remove('active');
    showFavoritesButton.classList.remove('active');
    manualImagesContainer.style.display = 'none';
    imageContainer.innerHTML = '';

    if(shuffledImgurImages && shuffledImgurImages.length > 0) {
      displayTipsQuotesPhotos(shuffledImgurImages);
    } else {
      const tipsQuotesImages = await fetchImgurImages();
      if(tipsQuotesImages.length > 0) {
        shuffledImgurImages = [...tipsQuotesImages];
        shuffleArray(shuffledImgurImages);
        displayTipsQuotesPhotos(shuffledImgurImages);
      } else {
        imageContainer.innerHTML = '<p>No Tips & Quotes available at the moment.</p>';
      }
    }

    const morePhotosButton = document.getElementById('morePhotosButton');
    if (morePhotosButton) morePhotosButton.style.display = 'none';
  });
});

// ==================================
// Global "Like" logic
// ==================================
document.addEventListener('click', (evt) => {
  const heartIcon = evt.target.closest('.heart-icon');
  // Skip global handler if the heart icon is inside the Flickr modal
  if (!heartIcon || heartIcon.closest('#imageModal')) return;
  
  evt.stopPropagation();

  const wasClicked = heartIcon.classList.contains('clicked');
  heartIcon.classList.toggle('clicked');

  const parentItem = heartIcon.closest('.image-item');
  const img = parentItem.querySelector('img');

  const pinterestLink = parentItem.querySelector('.hover-bar a.follow-btn')?.href || '';

  const photo = {
    src: img.src,
    alt: img.alt,
    manual: parentItem.classList.contains('manual'),
    manualTitle: parentItem.dataset.title || '',
    manualPrice: parentItem.dataset.price || '',
    manualDescription: parentItem.dataset.description || '',
    manualTutorial: parentItem.dataset.tutorial || '',
    manualTry: parentItem.dataset.try || '',
    manualGet: parentItem.dataset.get || '',
    postedDate: parentItem.dataset.posteddate || '',
    galleryLink: parentItem.dataset.gallerylink || '',
    pinterestLink: pinterestLink
  };

  if (!wasClicked) {
    addFavorite(photo);
    updateHeartsBySrc(photo.src);
  } else {
    removeFavorite(photo.src).then(() => {
      if (document.getElementById('showFavorites').classList.contains('active')) {
        const itemDiv = heartIcon.closest('.image-item');
        if (itemDiv) {
          itemDiv.remove();
        }
      }
      updateManualHearts();
      updateHeartsBySrc(photo.src);
    });
  }
});
</script>
<script>
  // Split URL components to obscure the source
  const domainPart = 'i.ibb' + '.co';
  const pathPart = '/nP7Mkvs/Bella-45.png';
  
  // Dynamically create favicon link
  const faviconLink = document.createElement('link');
  faviconLink.rel = 'icon';
  faviconLink.href = 'https://' + domainPart + pathPart;
  
  // Add to document head
  document.head.appendChild(faviconLink);
</script>

  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "pyh4snlwpe");
</script>



</body>
</html>
